<Window
  x:Class="CustomWindow.MainWindow"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:local="clr-namespace:CustomWindow"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  Title="MainWindow"
  Width="800"
  Height="450"
  Padding="4,0,4,4"
  StateChanged="Window_StateChanged"
  mc:Ignorable="d">
  <Window.Resources>
    <Style x:Key="TitleBTN" TargetType="Button">
      <Setter Property="Foreground" Value="{DynamicResource TextFillColorPrimaryBrush}" />
      <Setter Property="Width" Value="48" />
      <Setter Property="HorizontalContentAlignment" Value="Center" />
      <Setter Property="VerticalContentAlignment" Value="Center" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <Grid>
              <Border
                x:Name="Border"
                Panel.ZIndex="2"
                Background="Transparent"
                Opacity="0" />
              <ContentPresenter
                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                TextElement.FontFamily="{TemplateBinding FontFamily}"
                TextElement.Foreground="{TemplateBinding Foreground}" />
            </Grid>

            <ControlTemplate.Triggers>
              <Trigger Property="IsMouseOver" Value="True">
                <Setter TargetName="Border" Property="Background" Value="Black" />
                <Setter TargetName="Border" Property="Opacity" Value=".2" />
              </Trigger>
            </ControlTemplate.Triggers>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>
  </Window.Resources>
  <Window.Template>
    <ControlTemplate TargetType="{x:Type Window}">
      <AdornerDecorator>
        <Border
          Padding="{TemplateBinding Padding}"
          Background="{TemplateBinding Background}"
          BorderBrush="{TemplateBinding BorderBrush}"
          BorderThickness="{TemplateBinding BorderThickness}">
          <ContentPresenter />
        </Border>
      </AdornerDecorator>
    </ControlTemplate>
  </Window.Template>
  <WindowChrome.WindowChrome>
    <WindowChrome x:Name="Chrome" UseAeroCaptionButtons="False" />
  </WindowChrome.WindowChrome>
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="30" />
      <RowDefinition />
    </Grid.RowDefinitions>

    <Grid Grid.Row="0">
      <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition Width="auto" />
      </Grid.ColumnDefinitions>

      <StackPanel Grid.Column="0" Orientation="Horizontal">
        <Button
          Content="&#xE830;"
          FontFamily="{StaticResource SymbolThemeFontFamily}"
          Style="{StaticResource TitleBTN}"
          WindowChrome.IsHitTestVisibleInChrome="True" />
        <TextBlock
          Margin="8,0,0,0"
          VerticalAlignment="Center"
          Text="MainWindow" />
      </StackPanel>

      <StackPanel
        Grid.Column="1"
        Orientation="Horizontal"
        WindowChrome.IsHitTestVisibleInChrome="True">

        <Button
          Click="Window_Min"
          Content="&#xE921;"
          FontFamily="{StaticResource SymbolThemeFontFamily}"
          Style="{StaticResource TitleBTN}" />
        <Button
          x:Name="MaxBtn"
          Click="Window_Max"
          Content="&#xE922;"
          FontFamily="{StaticResource SymbolThemeFontFamily}"
          Style="{StaticResource TitleBTN}" />
        <Button
          Click="Window_Close"
          Content="&#xE8BB;"
          FontFamily="{StaticResource SymbolThemeFontFamily}"
          Style="{StaticResource TitleBTN}" />
      </StackPanel>

    </Grid>

    <Grid Grid.Row="1" Background="{DynamicResource CardBackgroundFillColorDefaultBrush}">
      <Button HorizontalAlignment="Center" Content="Click Me" />
    </Grid>

  </Grid>

</Window>
